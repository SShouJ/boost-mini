<view class="activity">
  <view class="tip bg-warning flex-center" wx:if="{{showTip}}">
    <view class="tip-text fs-14 cl-white">
      <text>活动开始后不能修改、删除活动，发布后分享给学员学员即可查看活动详情并在线报名</text>
    </view>
    <view class="close-btn  all-center">
      <image bindtap="closeTip" class="icon-18" src="../../../images/icon-close.png" mode="widthFix" />
    </view>
  </view>
  <!-- 标题 -->
  <view class="title cl-grey pd-17">
    <text class="fs-15">活动设置</text>
  </view>
  <!-- 表单内容 -->

  <view class="form-item pd-17 fs-15">
    <view class="label  pd-17">
      
      <text class="">活动主题图<text class="cl-grey fs-14">(活动主题图非必填)</text></text>
    </view>
    <view class="upload-wrap   all-center" bindtap="chooseImg">
     
      <image   src="{{banner}}" mode="aspectFit" />
    </view>
  </view>
  <view class="form-item pd-17 fs-15 flex-between">
    <view class="label">
      <text class="cl-red">*</text>
      <text class="ml-5">活动标题</text>
    </view>
    <input class="wd-210" type="text" bindinput="getInputValue" data-name="title" placeholder="请输入活动标题" />
  </view>
  <view class="form-item pd-17 fs-15">
    <view class="label">
      <text class="cl-red">*</text>
      <text class="ml-5">活动时间<text class="cl-grey fs-14">(默认时间为: 8:00至18.00)</text></text>
    </view>
    <view class="pd-17 flex-around fs-15">
      <picker bindchange="bindDateChange" data-name="startTime" mode="date">
        <view  class="date">
         {{time.startTime}} 
        </view>
      </picker>
      <text>至</text>
      <picker bindchange="bindDateChange" data-name="endTime" mode="date">
        <view class="date">
          {{time.endTime}}
        </view>
      </picker>
    </view>
  </view>
  <view class="prize-container pd-12  bg-whte" wx:for="{{prizeForms}}" wx:key="index">
    <view class="form-item pd-17 fs-15 flex-between">
      <view class="label">
        <text class="cl-red">*</text>
        <text class="ml-5">奖品</text>
      </view>
      <input class="wd-210" type="text" placeholder="{{item.goodName}}" bindinput="getInputValue" data-name="goodName" data-index="{{index}}" />
     
    </view>
    <view class="form-item pd-17 fs-15 flex-aligncenter ">
      <view class="label">
        <text class="cl-red">*</text>
        <text class="ml-5">奖品图片</text>
      </view>
       <view >
        <image class="img-upload"  wx:if="{{item.flag == 1}}" bindtap="chooseImg" src="{{item.goodImg}}" data-index="{{index}}" alt=""/>
        <image class="img-uploads"  wx:else bindtap="chooseImg" src="{{item.goodImg}}" data-index="{{index}}" alt=""/>
     
       </view>
    </view>
    <view class="form-item pd-17 fs-15 flex-between">
      <view class="label">
        <text class="cl-red">*</text>
        <text class="ml-5">奖品数量</text>
      </view>
      <input class="wd-210" type="number" bindinput="getInputValue" placeholder="{{item.count}}" data-index="{{index}}" data-name="count" />
    </view>
    <view class="form-item pd-17 fs-15 flex-between">
      <view class="label">
        <text class="cl-red">*</text>
        <text class="ml-5">满足条件</text>
      </view>
      <view class="wd-210 flex">
        <input class="wd-125" type="text" bindinput="getInputValue" placeholder="{{item.goodPrize}}" data-name="goodPrize" data-index="{{index}}" />
        <text>人</text>
      </view>
    </view>
  </view>
  <view class="all-center pd-12  bg-whte fs-15">
    <view class="all-center pd-5">
      <image class="icon-15" src="../../../images/icon-add.png" mode="widthFix" />
    <text class="ml-5 cl-green" bindtap="addItem">添加奖品</text>
    </view>
    <view class="all-center pd-5" wx:if="{{index!=1}}">
      <image class="icon-15" src="../../../images/icon-remove.png" mode="widthFix" />
    <text class="ml-5 cl-green" bindtap="removeItem">删除奖品</text>
    </view>
  </view>
  <!-- 活动规则 -->
  <view class="title cl-grey pd-17">
    <text class="cl-red">*</text>
    <text class="fs-15">活动规则</text>
  </view>
  <view class="form-item pd-17 fs-15">
    <view class="bd">
      <textarea class="text-area" bindinput="getInputValue" data-name="rule" placeholder="请输入商品规则" />
    </view>
  </view>
  <view class="btn-wrap all-center pd-30">
    <view class="btn pd-12_20 bg-blue cl-white fs-15" bindtap="createActive">
      立即发布
    </view>
  </view>
</view>

<wxs module="tools">
  function toChiness(num) {
    console.log(Number.isNaN(num))
    if (Number.isNaN(num)) {
      return;
    }
    let chinesNumber = ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九"];
    let bitArr = ["", "十", "百"];
    let numStr = num.toString();
    let numArr = numStr.split("");
    let str = '';
    //如果是十   前面的 一 省略   如果是
    for (var i = 0; i < numArr.length; i++) {
      let shu = chinesNumber[numArr[i]];
      let wei = bitArr[numArr.length - 1 - i];
      
      if (i == 0 && numArr[0] == 1 && numArr.length == 2) {
        shu = "";
      }
      if (numArr[i] == 0) {
        wei = '';
      }
      str +=shu+''+wei;
    }
    console.log(str);
    return str;
  }
  module.exports = {
    toChiness: toChiness
  }
</wxs>